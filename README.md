# Data Science with Django

This is a project to implement data science pipelines including data collection, ETL, and visualization on a webpage. This project is solely made with a Python backend both for data science implementation and rendering webpages. I have used Django framework to power the website, Numpy and Pandas for processing collected data, and Matplotlib and Seaborn for creating visualizations.

Refer to the [`requirements.txt`](https://github.com/Rakib1508/django-data-science/requirements.txt) file to get all the necessary modules used for this project. The steps to build the project will be mentioned below as the project develops.

## Project timeline

Here I have documented each steps that I followed to build this project along with date & time when I have completed a step in the project timeline.

### Setup Environment & Create Django project

#### <time datetime="2021-07-18 21:52:00">July 18, 2021 - 21:52</time>

1. Start the project with a virtual environment. To create the virtual environment, run the given command in any command line terminal.
   `virtualenv djds`
   Activate virtual environment by running
   `djds\scripts\activate` in Windows, or `source bin/activate` in Mac.

2. Install all necessary Python modules given in the `requirements.txt` by running
   `pip install -r requirements.txt`

3. Run `django-admin startproject analyzr .` on your command prompt or terminal to create the basic layout of your django project. The `.` at the end creates the project files on the same directory where you are running the command. You should have a SECRET_KEY in your `settings.py` file; keep this secret from everyone. In this repository, the key has been hidden using random `****` characters.

### Send Pandas dataframe from view to template

#### <time datetime="2021-07-19 15:57:00">July 19, 2021 - 14:57</time>

4. Creating Pandas dataframe from queryset is fairly easy. Django ORM produces queryset object and sends to view function when database call is performed. This object is passed into `pandas.dataFrame` method. This method turns any list of dictionary into a Pandas dataframe object.

5. A dataframe object has a `to_html()` method, which generates HTML for the dataframe information so that it can be displayed on the webpage. This HTML snippet is then passed into the context, which can be used by Django templating engine to include it in the response.

6. Django templating engine escapes all characters in a string. That is why the string of HTML snippet generated by pandas cannot be shown on the webpage unless it is made safe. To do this, we simply put `{{ html_snippet | safe }}` in the template. This marks the variable `html_snippet` to be safe and does not need to be escaped. Not that, this has security threats, which you need to handle manually.

### Create a Static CDN

#### <time datetime="2021-07-19 16:18:00">July 19, 2021 - 16:18</time>

7. Run the command `python manage.py collectstatic`, this will fetch settings data and create a folder called `static_cdn` in the root directory. Inside this folder, there will be

```
static_cdn/
   static_root/
      admin/
         css/
            vendor/
               select2/
                  some-files
            some .css files
         fonts/
            some .txt and .woff files
         img/
            gis/
               some .svg files
            some .svg files
         js/
            admin/
               some .js files
            vendor/
               jquery/
                  some .js files
               select2/
                  i18n/
                     some .js files
                  some .js files
               xregexp/
                  some .js files
            some .js files
```

### Create charts and render into HTML

#### <time datetime="2021-07-19 20:07:00">July 19, 2021 - 20:07</time>

8. We will put all our extra codes for `products` app into a separate python file `utils.py`. At this point, create this file inside `products` directory and write the functions to generate the graphs using matplotlib and seaborn, then produce a byte buffer representing that graph as a `png` image. Pass this buffer into the view and render it into the template to display it on the webpage.

9. Create some logics in the `products/models.py` file to handle cases when the form provided is not filled up completely, or cases for incomplete required information. This is done by putting some error messages on the screen to guide the user through providing all necessary information.

10. Put a `navbar.html` in the root templates directory to create a consistent navigation panel for the website. Currently, the panel just contains a heading which will be modified later.
